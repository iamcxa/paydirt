# Paydirt CLI POC è¨­è¨ˆæ–‡ä»¶

> **Date**: 2026-01-10
> **Status**: Draft
> **Goal**: å±•ç¤º Paydirt æ ¸å¿ƒæ©Ÿåˆ¶çš„ CLI ç´š POC

---

## 1. POC ç›®æ¨™

å±•ç¤º Paydirt çš„ä¸‰å€‹æ ¸å¿ƒæ©Ÿåˆ¶ï¼š

1. **Event-Driven é€šè¨Š** - bd comments ä½œç‚º message busï¼ŒClaude Hooks å³æ™‚åµæ¸¬
2. **Camp Boss ç›£æ§** - ç¨ç«‹ daemonï¼Œé€é Boomtown dashboard æŸ¥çœ‹
3. **è§’è‰²äº’å‹•** - Trail Boss â†” Surveyor â†” Claim Agent çš„å®Œæ•´å”ä½œæµç¨‹

### æŠ€è¡“é¸æ“‡

| æ±ºç­– | é¸æ“‡ | åŸå›  |
|------|------|------|
| äº‹ä»¶åµæ¸¬ | Claude Hooksï¼ˆPostToolUseï¼‰ | å³æ™‚ã€ç„¡éœ€ polling |
| è§’è‰²æ•¸é‡ | 4 å€‹ | æœ€å°å®Œæ•´æµç¨‹ |
| è§’è‰²å¯¦ç¾ | çœŸå¯¦ Claude é€²ç¨‹ | é©—è­‰å¯¦éš›å¯è¡Œæ€§ |

### åƒèˆ‡è§’è‰²

| è§’è‰² | è·è²¬ | ç”Ÿå‘½å‘¨æœŸ |
|------|------|----------|
| Camp Boss | ç›£æ§å…¨å±€ã€æ´¾é£ Caravan | Daemonï¼ˆå¸¸é§ï¼‰ |
| Trail Boss | å”èª¿ Caravanã€æ´¾å‡ºè§’è‰²ã€å•å•é¡Œ | Caravan å­˜çºŒæœŸé–“ |
| Surveyor | è¨­è¨ˆæ–¹æ¡ˆ | æŒ‰éœ€æ´¾å‡ºï¼Œå®Œæˆå³é€€å‡º |
| Claim Agent | å›ç­”å•é¡Œã€è¨˜éŒ„æ±ºç­– | æŒ‰éœ€æ´¾å‡ºï¼Œå®Œæˆå³é€€å‡º |

---

## 2. æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOOMTOWN (mprocs)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Camp Boss Pane    â”‚  â”‚   Caravan Status Pane       â”‚   â”‚
â”‚  â”‚   (attach to daemon)â”‚  â”‚   (bd list --watch)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ æŸ¥çœ‹                         â”‚ ç›£æ§
          â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Camp Boss Daemon   â”‚    â”‚     CARAVAN (tmux session)      â”‚
â”‚  (tmux: pd-boss)    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  ç¨ç«‹é‹è¡Œï¼Œä¸ä¾è³´    â”‚    â”‚  â”‚Trail Bossâ”‚â”€â”€â”‚Surveyor  â”‚     â”‚
â”‚  Boomtown           â”‚    â”‚  â”‚(Claude)  â”‚  â”‚(Claude)  â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                           â”‚       â”‚              â”‚          â”‚
                           â”‚       â”‚  bd comments â”‚          â”‚
                           â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                           â”‚              â”‚                  â”‚
                           â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”           â”‚
                           â”‚       â”‚ Claim Agent â”‚           â”‚
                           â”‚       â”‚  (Claude)   â”‚           â”‚
                           â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¦‚å¿µ

- **Boomtown** = mprocs dashboardï¼Œç´”æŸ¥çœ‹ç•Œé¢
- **Camp Boss Daemon** = ç¨ç«‹ tmux sessionï¼Œå¸¸é§é‹è¡Œ
- **Caravan** = tmux sessionï¼ŒTrail Boss åœ¨æ­¤å”èª¿å·¥ä½œ
- **Message Bus** = bd commentsï¼Œæ‰€æœ‰è§’è‰²é€éå®ƒé€šè¨Š

---

## 3. Event-Driven é€šè¨Šæ©Ÿåˆ¶

### Message Bus è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BD COMMENTS = MESSAGE BUS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PREFIX          â”‚ ç™¼é€è€…      â”‚ æ¥æ”¶è€…       â”‚ ç”¨é€”        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  QUESTION:       â”‚ Trail Boss  â”‚ Claim Agent  â”‚ è«‹æ±‚æ±ºç­–    â”‚
â”‚  ANSWER:         â”‚ Claim Agent â”‚ Trail Boss   â”‚ å›è¦†æ±ºç­–    â”‚
â”‚  OUTPUT:         â”‚ Surveyor    â”‚ Trail Boss   â”‚ äº¤ä»˜ç”¢å‡º    â”‚
â”‚  PROGRESS:       â”‚ Any         â”‚ Camp Boss    â”‚ é€²åº¦æ›´æ–°    â”‚
â”‚  SPAWN:          â”‚ Trail Boss  â”‚ Hook         â”‚ è«‹æ±‚æ´¾å‡ºè§’è‰²â”‚
â”‚  DECISION:       â”‚ Claim Agent â”‚ Ledger       â”‚ æ±ºç­–è¨˜éŒ„    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Hook è§¸ç™¼æµç¨‹

```
Trail Boss åŸ·è¡Œ bd comments add
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostToolUse Hook   â”‚  åµæ¸¬ Bash å·¥å…·ä½¿ç”¨
â”‚  (bd comments add)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ è§£æ comment å…§å®¹
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PREFIX æ˜¯ä»€éº¼ï¼Ÿ  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼     â–¼     â–¼         â–¼
QUESTION  SPAWN  OUTPUT   å…¶ä»–
    â”‚     â”‚      â”‚         â”‚
    â–¼     â–¼      â–¼         â–¼
æ´¾å‡º    æ´¾å‡º   é€šçŸ¥      è¨˜éŒ„
Claim   æŒ‡å®š   Trail     åˆ°
Agent   è§’è‰²   Boss      Journal
```

### Hook è¨­å®š (.claude/settings.json)

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/hooks/post-tool-use.sh"
          }
        ]
      }
    ]
  }
}
```

---

## 4. Claim Agent æ±ºç­–è¨˜éŒ„æµ

### é›™å¯«æ©Ÿåˆ¶

Claim Agent æ¯æ¬¡å›ç­”å•é¡Œæ™‚ï¼ŒåŒæ™‚å¯«å…¥å…©å€‹ä½ç½®ï¼š

```
Claim Agent æ”¶åˆ° QUESTION
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è®€å– Decision Ledgerï¼ˆæ­·å²æ±ºç­–ï¼‰                        â”‚
â”‚     LEDGER=$(bd list --label pd:ledger --limit 1 --brief) â”‚
â”‚     bd comments $LEDGER | grep "DECISION"                  â”‚
â”‚                                                            â”‚
â”‚  2. è®€å– Context Fileï¼ˆé è¨­ç­”æ¡ˆï¼‰                           â”‚
â”‚     cat $PAYDIRT_TUNNEL                                    â”‚
â”‚                                                            â”‚
â”‚  3. æ ¹æ“šæ­·å² + Context åšå‡ºæ±ºç­–                             â”‚
â”‚                                                            â”‚
â”‚  4. é›™å¯«ï¼š                                                  â”‚
â”‚     â”œâ”€â–¶ Caravan: bd comments add $CLAIM "ANSWER: ..."      â”‚
â”‚     â””â”€â–¶ Ledger:  bd comments add $LEDGER "DECISION: ..."   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Decision Ledger çµæ§‹

```bash
# Ledger æ˜¯å°ˆç”¨çš„ bd issueï¼Œæ¨™è¨˜ç‚º pd:ledger
bd create --title "Decision Ledger" --type epic --label pd:ledger

# æ¯æ¬¡æ±ºç­–è¨˜éŒ„æ ¼å¼
bd comments add $LEDGER "DECISION caravan=$CARAVAN_ID
Q: Which auth provider?
A: Supabase Auth
Confidence: high
Source: context-file
Reasoning: Context specifies 'Use Supabase ecosystem'"
```

### Claim Agent å•Ÿå‹•æµç¨‹

```
pd prospect claim-agent --claim $CLAIM_ID
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ‰¾åˆ° Ledger: bd list --label pd:ledger                â”‚
â”‚  2. è®€å–æ­·å²æ±ºç­–: bd comments $LEDGER | grep DECISION     â”‚
â”‚  3. è®€å– Context: cat $PAYDIRT_TUNNEL                     â”‚
â”‚  4. è®€å–ç•¶å‰å•é¡Œ: bd comments $CLAIM | grep QUESTION      â”‚
â”‚  5. å›ç­”å•é¡Œä¸¦é›™å¯«                                         â”‚
â”‚  6. é€€å‡º                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. CLI è¨­è¨ˆ

### å‘½ä»¤ç¸½è¦½

| å‘½ä»¤ | èªªæ˜ |
|------|------|
| **Daemon ç®¡ç†** | |
| `pd boss start` | å•Ÿå‹• Camp Boss daemon |
| `pd boss stop` | åœæ­¢ Camp Boss daemon |
| `pd boss status` | æŸ¥çœ‹ daemon ç‹€æ…‹ |
| **Dashboard** | |
| `pd boomtown` | é–‹å•Ÿ Dashboardï¼ˆæŸ¥çœ‹ç•Œé¢ï¼‰ |
| **Caravan ç®¡ç†** | |
| `pd stake "task"` | å»ºç«‹æ–° Caravan |
| `pd survey [id]` | æŸ¥çœ‹ç‹€æ…‹ |
| `pd abandon [id]` | åœæ­¢ Caravan |
| `pd prospect <role>` | æ´¾å‡ºæŒ‡å®šè§’è‰² |
| **tmux åŒ…è£** | |
| `pd attach [id]` | attach åˆ° Caravan/daemon tmux session |
| `pd detach` | detach ç•¶å‰ session |
| `pd list` | åˆ—å‡ºæ‰€æœ‰ paydirt tmux session |

### Daemon vs Dashboard åˆ†é›¢

```bash
# å•Ÿå‹• Camp Bossï¼ˆèƒŒæ™¯ daemonï¼‰
pd boss start
# â†’ å»ºç«‹ tmux session: pd-boss
# â†’ Claude åœ¨å…¶ä¸­é‹è¡Œï¼Œç›£æ§ bd è®ŠåŒ–

# é–‹å•Ÿ Dashboardï¼ˆå‰å°æŸ¥çœ‹ï¼‰
pd boomtown
# â†’ mprocs é¡¯ç¤ºç‹€æ…‹
# â†’ å¯ attach åˆ° Camp Boss pane äº’å‹•
# â†’ é—œé–‰ boomtown ä¸å½±éŸ¿ Camp Boss

# åœæ­¢ Camp Boss
pd boss stop
# â†’ kill tmux session: pd-boss
```

---

## 6. å®Œæ•´äº’å‹•æµç¨‹ç¯„ä¾‹

### å ´æ™¯ï¼šç”¨æˆ¶è«‹æ±‚ã€Œå¯¦ä½œé€šçŸ¥ç³»çµ±ã€

```
TIME  â”‚ å‹•ä½œ                                    â”‚ Message Bus
â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
T0    â”‚ ç”¨æˆ¶: pd stake "å¯¦ä½œé€šçŸ¥ç³»çµ±"            â”‚
      â”‚                                         â”‚
T1    â”‚ CLI å»ºç«‹ Caravan (pd-abc123)            â”‚ bd create --label pd:caravan
      â”‚ CLI spawn Trail Boss                    â”‚
      â”‚                                         â”‚
T2    â”‚ Trail Boss: åˆ†æä»»å‹™ï¼Œéœ€è¦æ±ºç­–          â”‚ bd comments add $CLAIM
      â”‚ "ç”¨ WebSocket é‚„æ˜¯ SSEï¼Ÿ"               â”‚ "QUESTION: WebSocket or SSE?"
      â”‚                                         â”‚
â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
T3    â”‚ PostToolUse Hook åµæ¸¬åˆ° QUESTION        â”‚
      â”‚ Hook spawn Claim Agent                  â”‚ pd prospect claim-agent
      â”‚                                         â”‚
T4    â”‚ Claim Agent: è®€å– Ledger æ­·å²           â”‚ bd comments $LEDGER
      â”‚ Claim Agent: åšå‡ºæ±ºç­–                   â”‚ bd comments add $CLAIM
      â”‚                                         â”‚ "ANSWER: SSE, å› ç‚ºå–®å‘è¶³å¤ "
      â”‚ Claim Agent: è¨˜éŒ„åˆ° Ledger              â”‚ bd comments add $LEDGER
      â”‚                                         â”‚ "DECISION: SSE..."
      â”‚ Claim Agent: é€€å‡º                       â”‚
      â”‚                                         â”‚
â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
T5    â”‚ Trail Boss: æ”¶åˆ° ANSWER                 â”‚
      â”‚ Trail Boss: è«‹æ±‚è¨­è¨ˆ                    â”‚ bd comments add $CLAIM
      â”‚                                         â”‚ "SPAWN: surveyor --task design"
      â”‚                                         â”‚
T6    â”‚ PostToolUse Hook åµæ¸¬åˆ° SPAWN           â”‚
      â”‚ Hook spawn Surveyor                     â”‚ pd prospect surveyor
      â”‚                                         â”‚
T7    â”‚ Surveyor: åŸ·è¡Œ brainstorming            â”‚
      â”‚ Surveyor: å¯«è¨­è¨ˆæ–‡ä»¶                    â”‚ Write docs/plans/...
      â”‚ Surveyor: å›å ±å®Œæˆ                      â”‚ bd comments add $CLAIM
      â”‚                                         â”‚ "OUTPUT: design=docs/plans/..."
      â”‚ Surveyor: é€€å‡º                          â”‚
      â”‚                                         â”‚
â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
T8    â”‚ Trail Boss: æ”¶åˆ° OUTPUT                 â”‚
      â”‚ Trail Boss: ç¹¼çºŒä¸‹ä¸€æ­¥...               â”‚
```

### Camp Boss è¦–è§’ï¼ˆåŒæ™‚é€²è¡Œï¼‰

```
Camp Boss (daemon) æŒçºŒç›£æ§:
â”œâ”€â”€ åµæ¸¬åˆ°æ–° Caravan pd-abc123
â”œâ”€â”€ è¨˜éŒ„åˆ° Journal: "OBSERVATION: new caravan started"
â”œâ”€â”€ æŒçºŒ watch bd list è®ŠåŒ–
â””â”€â”€ Boomtown é¡¯ç¤º Caravan ç‹€æ…‹ï¼ˆå¦‚æœé–‹å•Ÿï¼‰
```

---

## 7. æª”æ¡ˆçµæ§‹

### ç¾æœ‰è³‡æºï¼ˆå¯ç›´æ¥ä½¿ç”¨ï¼‰

```
paydirt/
â”œâ”€â”€ prospects/                 # âœ… å·²å­˜åœ¨
â”‚   â”œâ”€â”€ camp-boss.md          # âœ… å®Œæ•´
â”‚   â”œâ”€â”€ trail-boss.md         # âœ… å®Œæ•´
â”‚   â”œâ”€â”€ surveyor.md           # âœ… å®Œæ•´
â”‚   â””â”€â”€ claim-agent.md        # âœ… å®Œæ•´ï¼ˆéœ€è£œå…… Ledger è®€å–ï¼‰
```

### éœ€è¦æ–°å¢/ä¿®æ”¹

```
paydirt/
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ settings.json          # ğŸ†• Hook è¨­å®š
â”‚
â”œâ”€â”€ src/paydirt/
â”‚   â”œâ”€â”€ cli/
â”‚   â”‚   â”œâ”€â”€ mod.ts             # ğŸ“ æ›´æ–°ï¼šåŠ å…¥æ–°å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ boss.ts            # ğŸ†• pd boss start/stop/status
â”‚   â”‚   â”œâ”€â”€ attach.ts          # ğŸ†• pd attach [id]
â”‚   â”‚   â”œâ”€â”€ detach.ts          # ğŸ†• pd detach
â”‚   â”‚   â””â”€â”€ list.ts            # ğŸ†• pd list
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ mod.ts             # ğŸ†• Hook è™•ç†é‚è¼¯
â”‚   â”‚   â””â”€â”€ dispatcher.ts      # ğŸ†• æ ¹æ“š prefix æ´¾ç™¼
â”‚   â”‚
â”‚   â””â”€â”€ ledger/
â”‚       â””â”€â”€ mod.ts             # ğŸ†• Decision Ledger åˆå§‹åŒ–
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ post-tool-use.sh       # ğŸ†• Shell hook å…¥å£
â”‚
â””â”€â”€ paydirt.ts                 # ğŸ“ æ›´æ–°ï¼šåŠ å…¥æ–°å‘½ä»¤
```

### claim-agent.md è£œå……

åœ¨ Step 2 ä¹‹å‰åŠ å…¥ Ledger è®€å–ï¼š

```bash
# Step 1.5: Load Decision Ledger history
LEDGER=$(bd list --label pd:ledger --type epic --limit 1 --brief | head -1)
bd comments $LEDGER | grep "DECISION"
```

---

## 8. å¯¦ä½œé †åº

| éšæ®µ | å…§å®¹ | é©—è­‰æ–¹å¼ |
|------|------|----------|
| **P1** | Hook åŸºç¤è¨­æ–½ | Hook èƒ½åµæ¸¬ bd comments |
| **P2** | Claim Agent æµç¨‹ | QUESTION â†’ ANSWER å®Œæ•´æµç¨‹ |
| **P3** | Surveyor æµç¨‹ | SPAWN â†’ OUTPUT å®Œæ•´æµç¨‹ |
| **P4** | Camp Boss daemon | pd boss start/stop é‹ä½œ |
| **P5** | Boomtown æ•´åˆ | Dashboard é¡¯ç¤ºå³æ™‚ç‹€æ…‹ |
| **P6** | tmux CLI åŒ…è£ | pd attach/detach/list é‹ä½œ |

---

## 9. æˆåŠŸæ¨™æº–

POC æˆåŠŸçš„å®šç¾©ï¼š

1. **Event-Driven é€šè¨Š**
   - [ ] Trail Boss å¯«å…¥ `QUESTION:` å¾Œï¼ŒHook è‡ªå‹•æ´¾å‡º Claim Agent
   - [ ] Claim Agent å¯«å…¥ `ANSWER:` å¾Œè‡ªå‹•é€€å‡º
   - [ ] Trail Boss å¯«å…¥ `SPAWN: surveyor` å¾Œï¼ŒHook è‡ªå‹•æ´¾å‡º Surveyor

2. **Camp Boss ç›£æ§**
   - [ ] `pd boss start` èƒ½å•Ÿå‹• daemon
   - [ ] `pd boss stop` èƒ½åœæ­¢ daemon
   - [ ] Camp Boss èƒ½çœ‹åˆ° Caravan ç‹€æ…‹è®ŠåŒ–

3. **è§’è‰²äº’å‹•**
   - [ ] å®Œæ•´æµç¨‹ï¼šstake â†’ Trail Boss â†’ QUESTION â†’ Claim Agent â†’ ANSWER â†’ SPAWN â†’ Surveyor â†’ OUTPUT
   - [ ] Claim Agent çš„ Decision Ledger é›™å¯«æ­£å¸¸é‹ä½œ
   - [ ] æ–°çš„ Claim Agent å¯¦ä¾‹èƒ½è®€å–æ­·å²æ±ºç­–
